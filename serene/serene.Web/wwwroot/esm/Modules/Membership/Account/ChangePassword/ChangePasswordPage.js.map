{
  "version": 3,
  "sources": ["../../../../../../Modules/Membership/Account/ChangePassword/ChangePasswordPage.ts"],
  "sourcesContent": ["import { ChangePasswordForm, ChangePasswordRequest } from \"@/ServerTypes/Membership\";\nimport { Texts } from \"@/ServerTypes/Texts\";\nimport { PropertyPanel } from \"@serenity-is/corelib\";\nimport { format, information, resolveUrl, serviceCall, localText, htmlEncode } from \"@serenity-is/corelib/q\";\n\n$(function () {\n    new ChangePasswordPanel($('#ChangePasswordPanel'));\n});\n\nclass ChangePasswordPanel extends PropertyPanel<ChangePasswordRequest, any> {\n\n    protected getFormKey() { return ChangePasswordForm.formKey; }\n\n    private form: ChangePasswordForm;\n\n    constructor(container: JQuery) {\n        super(container);\n\n        this.form = new ChangePasswordForm(this.idPrefix);\n        this.form.NewPassword.addValidationRule(this.uniqueName, e => {\n            if (this.form.ConfirmPassword.value.length < 7) {\n                return format(Texts.Validation.MinRequiredPasswordLength, 7);\n            }\n        });\n\n        this.form.ConfirmPassword.addValidationRule(this.uniqueName, e => {\n            if (this.form.ConfirmPassword.value !== this.form.NewPassword.value) {\n                return localText('Validation.PasswordConfirm');\n            }\n        });\n\n        this.byId('SubmitButton').click(e => {\n            e.preventDefault();\n\n            if (!this.validateForm())\n                return;\n\n            var request = this.getSaveEntity();\n            serviceCall({\n                url: resolveUrl('~/Account/ChangePassword'),\n                request: request,\n                onSuccess: () => {\n                    information(Texts.Forms.Membership.ChangePassword.Success, () => {\n                        window.location.href = resolveUrl('~/');\n                    });\n                }\n            });\n        });\n    }\n\n    getTemplate() {\n        return `<div class=\"s-Panel\">\n<h3 class=\"page-title mb-4 text-center\">${htmlEncode(localText(\"Forms.Membership.ChangePassword.FormTitle\"))}</h3>\n<form id=\"~_Form\" action=\"\">\n    <div id=\"~_PropertyGrid\"></div>\n    <div class=\"px-field mt-4\">\n        <button id=\"~_SubmitButton\" type=\"submit\" class=\"btn btn-primary w-100\">\n            ${htmlEncode(Texts.Forms.Membership.ChangePassword.SubmitButton)}\n        </button>\n    </div>\n</form>\n</div>`;\n    }\n}"],
  "mappings": "mMAEA,IAAAA,EAA8B,SAC9BC,EAAoF,SAEpF,EAAE,UAAY,CACV,IAAIC,EAAoB,EAAE,sBAAsB,CAAC,CACrD,CAAC,EAED,IAAMA,EAAN,cAAkC,eAA0C,CAMxE,YAAYC,EAAmB,CAC3B,MAAMA,CAAS,EAEf,KAAK,KAAO,IAAIC,EAAmB,KAAK,QAAQ,EAChD,KAAK,KAAK,YAAY,kBAAkB,KAAK,WAAYC,GAAK,CAC1D,GAAI,KAAK,KAAK,gBAAgB,MAAM,OAAS,EACzC,SAAO,UAAOC,EAAM,WAAW,0BAA2B,CAAC,CAEnE,CAAC,EAED,KAAK,KAAK,gBAAgB,kBAAkB,KAAK,WAAYD,GAAK,CAC9D,GAAI,KAAK,KAAK,gBAAgB,QAAU,KAAK,KAAK,YAAY,MAC1D,SAAO,aAAU,4BAA4B,CAErD,CAAC,EAED,KAAK,KAAK,cAAc,EAAE,MAAMA,GAAK,CAGjC,GAFAA,EAAE,eAAe,EAEb,EAAC,KAAK,aAAa,EAGvB,KAAIE,EAAU,KAAK,cAAc,KACjC,eAAY,CACR,OAAK,cAAW,0BAA0B,EAC1C,QAASA,EACT,UAAW,IAAM,IACb,eAAYD,EAAM,MAAM,WAAW,eAAe,QAAS,IAAM,CAC7D,OAAO,SAAS,QAAO,cAAW,IAAI,CAC1C,CAAC,CACL,CACJ,CAAC,EACL,CAAC,CACL,CArCU,YAAa,CAAE,OAAOF,EAAmB,OAAS,CAuC5D,aAAc,CACV,MAAO;AAAA,6CAC2B,iBAAW,aAAU,2CAA2C,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,iBAK7F,cAAWE,EAAM,MAAM,WAAW,eAAe,YAAY;AAAA;AAAA;AAAA;AAAA,OAKvE,CACJ,EAtDME,EAAAN,EAAA",
  "names": ["import_corelib", "import_q", "ChangePasswordPanel", "container", "ChangePasswordForm", "e", "Texts", "request", "__name"]
}
