{
  "version": 3,
  "sources": ["../../../../../../Modules/Membership/Account/SignUp/SignUpPage.ts"],
  "sourcesContent": ["import { SignUpForm, SignUpRequest } from \"@/ServerTypes/Membership\";\r\nimport { Texts } from \"@/ServerTypes/Texts\";\r\nimport { PropertyPanel } from \"@serenity-is/corelib\";\r\nimport { information, resolveUrl, serviceCall, localText, htmlEncode } from \"@serenity-is/corelib/q\";\r\nimport { SignUpResponse } from \"@/ServerTypes/Membership/SignUpResponse\";\r\n\r\n$(function () {\r\n    new SignUpPanel($('#SignUpPanel'));\r\n});\r\n\r\nclass SignUpPanel extends PropertyPanel<SignUpRequest, any> {\r\n\r\n    protected getFormKey() { return SignUpForm.formKey; }\r\n\r\n    private form: SignUpForm;\r\n\r\n    constructor(container: JQuery) {\r\n        super(container);\r\n\r\n        this.form = new SignUpForm(this.idPrefix);\r\n\r\n        this.form.ConfirmEmail.addValidationRule(this.uniqueName, e => {\r\n            if (this.form.ConfirmEmail.value !== this.form.Email.value) {\r\n                return Texts.Validation.EmailConfirm;\r\n            }\r\n        });\r\n\r\n        this.form.ConfirmPassword.addValidationRule(this.uniqueName, e => {\r\n            if (this.form.ConfirmPassword.value !== this.form.Password.value) {\r\n                return localText('Validation.PasswordConfirm');\r\n            }\r\n        });\r\n\r\n        this.byId('SubmitButton').click(e => {\r\n            e.preventDefault();\r\n\r\n            if (!this.validateForm()) {\r\n                return;\r\n            }\r\n\r\n            serviceCall({\r\n                url: resolveUrl('~/Account/SignUp'),\r\n                request: {\r\n                    DisplayName: this.form.DisplayName.value,\r\n                    Email: this.form.Email.value,\r\n                    Password: this.form.Password.value\r\n                },\r\n                onSuccess: (response: SignUpResponse) => {\r\n                    if (response.DemoActivationLink) {\r\n                        information(\"You would normally receive an e-mail with instructions to active your account now.\\n\\n\" +\r\n                            \"But as this is a DEMO, you'll be redirected to the activation page automatically. \", () => {\r\n                            window.location.href = resolveUrl(response.DemoActivationLink);\r\n                        });\r\n\r\n                        return;\r\n                    }\r\n\r\n                    information(Texts.Forms.Membership.SignUp.Success, () => {\r\n                        window.location.href = resolveUrl('~/');\r\n                    });\r\n                }\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n    getTemplate() {\r\n        return `<h2 class=\"text-center p-4\">\r\n        <img src=\"${resolveUrl(\"~/Content/site/images/serenity-logo-w-128.png\")}\"\r\n            class=\"rounded-circle p-1\" style=\"background-color: var(--s-sidebar-band-bg)\"\r\n            width=\"50\" height=\"50\" /> serene\r\n    </h2>\r\n\r\n    <div class=\"s-Panel p-4\">\r\n\r\n        <h5 class=\"text-center my-4\">${htmlEncode(Texts.Forms.Membership.SignUp.FormTitle)}</h5>\r\n        <p class=\"text-center\">${htmlEncode(Texts.Forms.Membership.SignUp.FormInfo)}</p>\r\n\r\n        <form id=\"~_Form\" action=\"\">\r\n            <div id=\"~_PropertyGrid\"></div>\r\n            <div class=\"px-field\">\r\n                <button id=\"~_SubmitButton\" type=\"submit\" class=\"btn btn-primary my-4 w-100\">\r\n                    ${htmlEncode(Texts.Forms.Membership.SignUp.SubmitButton)}\r\n                </button>\r\n            </div>\r\n        </form>\r\n    </div>`;\r\n    }\r\n}\r\n"],
  "mappings": "mMAEA,IAAAA,EAA8B,SAC9BC,EAA4E,SAG5E,EAAE,UAAY,CACV,IAAIC,EAAY,EAAE,cAAc,CAAC,CACrC,CAAC,EAED,IAAMA,EAAN,cAA0B,eAAkC,CAMxD,YAAYC,EAAmB,CAC3B,MAAMA,CAAS,EAEf,KAAK,KAAO,IAAIC,EAAW,KAAK,QAAQ,EAExC,KAAK,KAAK,aAAa,kBAAkB,KAAK,WAAYC,GAAK,CAC3D,GAAI,KAAK,KAAK,aAAa,QAAU,KAAK,KAAK,MAAM,MACjD,OAAOC,EAAM,WAAW,YAEhC,CAAC,EAED,KAAK,KAAK,gBAAgB,kBAAkB,KAAK,WAAYD,GAAK,CAC9D,GAAI,KAAK,KAAK,gBAAgB,QAAU,KAAK,KAAK,SAAS,MACvD,SAAO,aAAU,4BAA4B,CAErD,CAAC,EAED,KAAK,KAAK,cAAc,EAAE,MAAMA,GAAK,CACjCA,EAAE,eAAe,EAEZ,KAAK,aAAa,MAIvB,eAAY,CACR,OAAK,cAAW,kBAAkB,EAClC,QAAS,CACL,YAAa,KAAK,KAAK,YAAY,MACnC,MAAO,KAAK,KAAK,MAAM,MACvB,SAAU,KAAK,KAAK,SAAS,KACjC,EACA,UAAYE,GAA6B,CACrC,GAAIA,EAAS,mBAAoB,IAC7B,eAAY;AAAA;AAAA,oFAC8E,IAAM,CAC5F,OAAO,SAAS,QAAO,cAAWA,EAAS,kBAAkB,CACjE,CAAC,EAED,MACJ,IAEA,eAAYD,EAAM,MAAM,WAAW,OAAO,QAAS,IAAM,CACrD,OAAO,SAAS,QAAO,cAAW,IAAI,CAC1C,CAAC,CACL,CACJ,CAAC,CAEL,CAAC,CACL,CApDU,YAAa,CAAE,OAAOF,EAAW,OAAS,CAsDpD,aAAc,CACV,MAAO;AAAA,uBACK,cAAW,+CAA+C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAOvC,cAAWE,EAAM,MAAM,WAAW,OAAO,SAAS;AAAA,oCACxD,cAAWA,EAAM,MAAM,WAAW,OAAO,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAM5D,cAAWA,EAAM,MAAM,WAAW,OAAO,YAAY;AAAA;AAAA;AAAA;AAAA,WAKvE,CACJ,EA9EME,EAAAN,EAAA",
  "names": ["import_corelib", "import_q", "SignUpPanel", "container", "SignUpForm", "e", "Texts", "response", "__name"]
}
