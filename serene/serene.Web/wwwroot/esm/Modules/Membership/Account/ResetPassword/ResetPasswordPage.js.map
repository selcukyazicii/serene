{
  "version": 3,
  "sources": ["../../../../../../Modules/Membership/Account/ResetPassword/ResetPasswordPage.ts"],
  "sourcesContent": ["import { ResetPasswordForm, ResetPasswordRequest } from \"@/ServerTypes/Membership\";\r\nimport { Texts } from \"@/ServerTypes/Texts\";\r\nimport { PropertyPanel } from \"@serenity-is/corelib\";\r\nimport { format, information, resolveUrl, serviceCall, localText, htmlEncode } from \"@serenity-is/corelib/q\";\r\n\r\n$(function () {\r\n    new ResetPasswordPanel($('#ResetPasswordPanel'));\r\n});\r\n\r\nexport class ResetPasswordPanel extends PropertyPanel<ResetPasswordRequest, any> {\r\n\r\n    protected getFormKey() { return ResetPasswordForm.formKey; }\r\n\r\n    private form: ResetPasswordForm;\r\n\r\n    constructor(container: JQuery) {\r\n        super(container);\r\n\r\n        this.form = new ResetPasswordForm(this.idPrefix);\r\n\r\n        this.form.NewPassword.addValidationRule(this.uniqueName, e => {\r\n            if (this.form.NewPassword.value.length < 7) {\r\n                return format(Texts.Validation.MinRequiredPasswordLength, 7);\r\n            }\r\n        });\r\n\r\n        this.form.ConfirmPassword.addValidationRule(this.uniqueName, e => {\r\n            if (this.form.ConfirmPassword.value !== this.form.NewPassword.value) {\r\n                return localText('Validation.PasswordConfirm');\r\n            }\r\n        });\r\n\r\n        this.byId('SubmitButton').click(e => {\r\n            e.preventDefault();\r\n\r\n            if (!this.validateForm())\r\n                return;\r\n\r\n            var request = this.getSaveEntity();\r\n            request.Token = this.byId('Token').val();\r\n            serviceCall({\r\n                url: resolveUrl('~/Account/ResetPassword'),\r\n                request: request,\r\n                onSuccess: () => {\r\n                    information(Texts.Forms.Membership.ResetPassword.Success, () => {\r\n                        window.location.href = resolveUrl('~/Account/Login');\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    getTemplate() {\r\n        return `<h2 class=\"text-center p-4\">\r\n    <img src=\"${resolveUrl(\"~/Content/site/images/serenity-logo-w-128.png\")}\"\r\n        class=\"rounded-circle p-1\" style=\"background-color: var(--s-sidebar-band-bg)\"\r\n        width=\"50\" height=\"50\" /> serene\r\n</h2>\r\n\r\n<div class=\"s-Panel p-4\">\r\n    <h5 class=\"text-center mb-4\">${htmlEncode(Texts.Forms.Membership.ResetPassword.FormTitle)}</h5>\r\n    <form id=\"~_Form\" action=\"\">\r\n        <div id=\"~_PropertyGrid\"></div>\r\n        <button id=\"~_SubmitButton\" type=\"submit\" class=\"btn btn-primary mx-8 w-100\">\r\n            ${htmlEncode(Texts.Forms.Membership.ResetPassword.SubmitButton)}\r\n        </button>\r\n        <input type=\"hidden\" id=\"~_Token\" value=\"${(document.getElementById('ResetPasswordToken') as HTMLInputElement).value}\" />\r\n    </form>\r\n</div>`;\r\n    }\r\n}"],
  "mappings": "mMAEA,IAAAA,EAA8B,SAC9BC,EAAoF,SAEpF,EAAE,UAAY,CACV,IAAIC,EAAmB,EAAE,qBAAqB,CAAC,CACnD,CAAC,EAEM,IAAMA,EAAN,cAAiC,eAAyC,CAM7E,YAAYC,EAAmB,CAC3B,MAAMA,CAAS,EAEf,KAAK,KAAO,IAAIC,EAAkB,KAAK,QAAQ,EAE/C,KAAK,KAAK,YAAY,kBAAkB,KAAK,WAAYC,GAAK,CAC1D,GAAI,KAAK,KAAK,YAAY,MAAM,OAAS,EACrC,SAAO,UAAOC,EAAM,WAAW,0BAA2B,CAAC,CAEnE,CAAC,EAED,KAAK,KAAK,gBAAgB,kBAAkB,KAAK,WAAYD,GAAK,CAC9D,GAAI,KAAK,KAAK,gBAAgB,QAAU,KAAK,KAAK,YAAY,MAC1D,SAAO,aAAU,4BAA4B,CAErD,CAAC,EAED,KAAK,KAAK,cAAc,EAAE,MAAMA,GAAK,CAGjC,GAFAA,EAAE,eAAe,EAEb,EAAC,KAAK,aAAa,EAGvB,KAAIE,EAAU,KAAK,cAAc,EACjCA,EAAQ,MAAQ,KAAK,KAAK,OAAO,EAAE,IAAI,KACvC,eAAY,CACR,OAAK,cAAW,yBAAyB,EACzC,QAASA,EACT,UAAW,IAAM,IACb,eAAYD,EAAM,MAAM,WAAW,cAAc,QAAS,IAAM,CAC5D,OAAO,SAAS,QAAO,cAAW,iBAAiB,CACvD,CAAC,CACL,CACJ,CAAC,EACL,CAAC,CACL,CAvCU,YAAa,CAAE,OAAOF,EAAkB,OAAS,CAyC3D,aAAc,CACV,MAAO;AAAA,mBACC,cAAW,+CAA+C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAMvC,cAAWE,EAAM,MAAM,WAAW,cAAc,SAAS;AAAA;AAAA;AAAA;AAAA,iBAI9E,cAAWA,EAAM,MAAM,WAAW,cAAc,YAAY;AAAA;AAAA,mDAEtB,SAAS,eAAe,oBAAoB,EAAuB;AAAA;AAAA,OAGnH,CACJ,EA7DaE,EAAAN,EAAA",
  "names": ["import_corelib", "import_q", "ResetPasswordPanel", "container", "ResetPasswordForm", "e", "Texts", "request", "__name"]
}
